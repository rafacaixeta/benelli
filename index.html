
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Inicial</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="menu-superior">
        <ul>
            <li><a href="#" data-aba="registro-paciente">Registro de novo paciente</a></li>
            <li><a href="#" data-aba="orcamentos">Orçamentos</a></li>
            <li><a href="#" data-aba="termo-consentimento">Termo de Consentimento</a></li>
            <li><a href="#" data-aba="receituarios">Receituários</a></li>
            <li><a href="#" data-aba="mais">Mais</a></li>
            <li><a href="#" data-aba="mais-mais">Mais Mais</a></li>
        </ul>
    </div>

    <div class="container">
        <div class="menu-lateral">
            <button class="botao" style="background-color: green;">Agenda</button>
            <button class="botao" style="background-color: blue;">Azul</button>
            <button class="botao" style="background-color: black; color: white;">Preto</button>
            <button class="botao" style="background-color: white; color: black;">Branco</button>
            <button class="botao" style="background-color: purple; color: white;">Roxo</button>
            <button class="botao" style="background-color: gray;">Cinza</button>
        </div>

      

        <div class="conteudo">
            <div id="conteudo" style="display: block;">
                <h1>Bem-vindo ao Sistema de Prontuário</h1>
                <p>Aqui você pode gerenciar os pacientes e os documentos necessários.</p>
            </div>

            <div id="registro-paciente" style="display: none;">
                <h2>Registro de Novo Paciente</h2>
                <form id="formRegistro" action="processa_registro.php" method="POST">
                    <h3>Dados Pessoais</h3>
                    <label for="nome">Nome Completo:</label>
                    <input type="text" id="nome" name="nome" required><br>

                    <label for="data_nascimento">Data de Nascimento:</label>
                    <input type="date" id="data_nascimento" name="data_nascimento" required><br>

                    <label for="sexo">Sexo:</label>
                    <select id="sexo" name="sexo" required>
                        <option value="" disabled selected>Escolha uma opção</option>
                        <option value="F">Feminino</option>
                        <option value="M">Masculino</option>
                    </select><br>

                    <label for="rg">RG:</label>
                    <input type="text" id="rg" name="rg" required><br>

                    <label for="altura">Altura:</label>
                    <input type="text" id="altura" name="altura" required><br>

                    <label for="estado_civil">Estado Civil:</label>
                    <input type="text" id="estado_civil" name="estado_civil" required><br>

                    <label for="skin_color">Cor de Pele:</label>
                    <input type="text" id="skin_color" name="skin_color" required><br>

                    <label for="ufrom">Naturalidade:</label>
                    <input type="text" id="ufrom" name="ufrom" required><br>

                    <label for="escolaridade">Escolaridade:</label>
                    <input type="text" id="escolaridade" name="escolaridade" required><br>

                    <h3>Endereço e Contato</h3>
                    <label for="cep">CEP:</label>
                    <input type="text" id="cep" name="cep" required><br>

                    <label for="endereço_residencial">Endereço:</label>
                    <input type="text" id="endereço_residencial" name="endereço_residencial" required><br>

                    <label for="telefone">Telefone:</label>
                    <input type="tel" id="telefone" name="telefone" required><br>

                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required><br>

                    <h3>Dados Profissionais</h3>
                    <label for="profissao">Profissão:</label>
                    <input type="text" id="profissao" name="profissao" required><br>

                    <h3>Anamnese</h3>
                    <label for="saude">Questões de Saúde:</label>
                    <textarea id="saude" name="saude" rows="4" required></textarea><br>

                    <label for="alergias">Alergias:</label>
                    <textarea id="alergias" name="alergias" rows="2" required></textarea><br>

                    <label for="historico_dentario">Histórico Dentário:</label>
                    <textarea id="historico_dentario" name="historico_dentario" rows="2" required></textarea><br>

                    <label for="dentista">Atendido pelo(a) Dentista:</label>
                    <select id="dentista" name="dentista" required>
                        <option value="" disabled selected>Escolha uma opção</option>
                        <option value="OBS">Dr. Otávio Benelli</option>
                        <option value="TRD">Dra. Thabata Dias</option>
                        <option value="SRD">Dra. Samantha Dias</option>
                    </select><br>

                    <button type="submit">Registrar Paciente</button>
                </form>
            </div>

            <!-- Aba de Orçamentos -->
            <div id="orcamentos" style="display: none;">
                <h2>Orçamentos</h2>

                <!-- Geração de novo orçamento -->
                <h3>Gerar Novo Orçamento</h3>
                <form id="formOrcamento" action="processa_orcamento.php" method="POST">
                    <label for="paciente">Selecione um Paciente:</label>
                    <select id="paciente" name="paciente" required onchange="carregarOrcamento(this.value)">
                        <option value="" disabled selected>Escolha um paciente</option>
                        <!-- No futuro, esse campo será preenchido com dados do banco de pacientes -->
                        <option value="1">Paciente Exemplo 1</option>
                        <option value="2">Paciente Exemplo 2</option>
                    </select><br><br>

                    <div id="orcamentoExistente" style="display: none;">
                        <h4>Orçamento Anterior:</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Dente</th>
                                    <th>Procedimento</th>
                                    <th>Valor (R$)</th>
                                </tr>
                            </thead>
                            <tbody id="orcamentoBody">
                                <!-- Dados do orçamento serão preenchidos aqui -->
                            </tbody>
                        </table>
                    </div>

                    <h3>Adicionar Procedimento</h3>
                    <label for="dente">Número do Dente:</label>
                    <select id="dente" name="dente" required>
                        <option value="" disabled selected>Escolha um dente</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="31">31</option>
                        <option value="32">32</option>
                        <option value="33">33</option>
                        <option value="34">34</option>
                        <option value="35">35</option>
                        <option value="36">36</option>
                        <option value="37">37</option>
                        <option value="38">38</option>
                        <option value="41">41</option>
                        <option value="42">42</option>
                        <option value="43">43</option>
                        <option value="44">44</option>
                        <option value="45">45</option>
                        <option value="46">46</option>
                        <option value="47">47</option>
                        <option value="48">48</option>
                    </select><br>

                    <label for="procedimento">Procedimento:</label>
                    <input type="text" id="procedimento" name="procedimento" required><br>

                    <label for="valor">Valor (R$):</label>
                    <input type="number" id="valor" name="valor" step="0.01" required><br>

                    <button type="button" id="adicionarProcedimento" onclick="adicionarProcedimento()">Adicionar Procedimento</button><br><br>

                    <button type="submit">Finalizar Orçamento</button>
                </form>
            </div>
            <!-- Botão verde -->
            <div id="agenda-consultas" style="display: none;">
                <h2>Agenda de Consultas</h2>

                <form id="formAgenda" action="processa_agenda.php" method="POST">
                    <!-- Seleção do paciente -->
                    <label for="paciente-agenda">Paciente:</label>
                    <select id="paciente-agenda" name="paciente" required>
                        <option value="" disabled selected>Escolha um paciente</option>
                        <option value="1">Paciente Exemplo 1</option>
                        <option value="2">Paciente Exemplo 2</option>
                        <!-- Aqui serão inseridos os pacientes do banco de dados -->
                    </select><br>

                    <!-- Seleção do dentista -->
                    <label for="dentista-agenda">Dentista:</label>
                    <select id="dentista-agenda" name="dentista" required>
                        <option value="" disabled selected>Escolha um dentista</option>
                        <option value="OBS">Dr. Otávio Benelli</option>
                        <option value="TRD">Dra. Thabata Dias</option>
                        <option value="SRD">Dra. Samantha Dias</option>
                    </select><br>

                    <div id="agenda-header">
                        <button id="anterior" onclick="mudarSemana(-1)">Semana Anterior</button>
                        <span id="semana-atual"></span>
                        <button id="proximo" onclick="mudarSemana(1)">Próxima Semana</button>
                    </div>
    
                    <!-- Visualização semanal da agenda -->
                    <div id="tabela-agenda">
                        <!-- A tabela será preenchida dinamicamente com os horários disponíveis -->
                    </div>

                    <button type="submit">Confirmar Consulta</button>
                </form>
            </div>
            <div id="termo-consentimento" style="display: none;">
                <h2>Termo de Consentimento</h2>
                <p>Conteúdo do Termo de Consentimento.</p>
            </div>

            <div id="receituarios" style="display: none;">
                <h2>Receituários</h2>
                <p>Conteúdo dos Receituários.</p>
            </div>

            <div id="mais" style="display: none;">
                <h2>Mais</h2>
                <p>Conteúdo da seção Mais.</p>
            </div>

            <div id="mais-mais" style="display: none;">
                <h2>Mais Mais</h2>
                <p>Conteúdo da seção Mais Mais.</p>
            </div>
        </div>
    </div>

    <script>
        // Função para trocar entre abas
        const links = document.querySelectorAll('.menu-superior ul li a');
        links.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const aba = this.dataset.aba;
                
                document.querySelectorAll('.conteudo > div').forEach(div => {
                    div.style.display = 'none';
                });

                document.getElementById(aba).style.display = 'block';
            });
        });


    // Função para gerar a tabela de horários
    function gerarTabelaAgenda() {
        const diasDaSemana = ['Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta'];
        const horarios = [];

        // Gera horários de 8h até 18h com intervalos de 1 hora
        for (let i = 8; i <= 18; i++) {
            horarios.push(i + ':00');
        }

        const tabela = document.createElement('table');
        tabela.setAttribute('border', '1');
        tabela.innerHTML = '<tr><th>Horário</th><th>Segunda</th><th>Terça</th><th>Quarta</th><th>Quinta</th><th>Sexta</th></tr>';

        horarios.forEach(horario => {
            const linha = document.createElement('tr');
            const celulaHorario = document.createElement('td');
            celulaHorario.innerText = horario;
            linha.appendChild(celulaHorario);

            diasDaSemana.forEach(dia => {
                const celula = document.createElement('td');
                celula.innerHTML = `<input type="radio" name="consulta-horario" value="${dia}-${horario}">`;
                linha.appendChild(celula);
            });

            tabela.appendChild(linha);
        });

        // Insere a tabela no div da agenda
        document.getElementById('tabela-agenda').innerHTML = '';
        document.getElementById('tabela-agenda').appendChild(tabela);
    }

    // Evento para exibir a agenda ao clicar no botão verde
    document.querySelector('.botao[style="background-color: green;"]').addEventListener('click', function() {
        // Esconde outras seções e mostra a agenda
        document.querySelectorAll('.conteudo > div').forEach(div => {
            div.style.display = 'none';
        });
        document.getElementById('agenda-consultas').style.display = 'block';

        // Gera a tabela de horários quando a agenda for exibida
        gerarTabelaAgenda();
    });

    let semanaAtual = new Date(); // A semana começa no dia atual

    // Função para mudar a semana (com valor -1 para voltar e 1 para avançar)
    function mudarSemana(valor) {
        semanaAtual.setDate(semanaAtual.getDate() + valor * 7);
        atualizarSemana();
    }

    // Função para formatar a data e atualizar o cabeçalho da semana
    function atualizarSemana() {
        const inicioSemana = new Date(semanaAtual);
        const fimSemana = new Date(semanaAtual);
        inicioSemana.setDate(inicioSemana.getDate() - inicioSemana.getDay() + 1); // Segunda-feira
        fimSemana.setDate(inicioSemana.getDate() + 6); // Domingo
        
        const opcoes = { day: '2-digit', month: '2-digit', year: 'numeric' };
        document.getElementById('semana-atual').innerText = `Semana de ${inicioSemana.toLocaleDateString('pt-BR', opcoes)} até ${fimSemana.toLocaleDateString('pt-BR', opcoes)}`;
        
        // Aqui você pode carregar as consultas da semana em questão
        carregarConsultas(inicioSemana, fimSemana);
    }

    // Chamada para atualizar a semana assim que a página carregar
    window.onload = atualizarSemana;

    // Função para carregar consultas de uma semana específica
    function carregarConsultas(inicioSemana, fimSemana) {
        // Aqui você faria uma requisição ao servidor (usando fetch ou AJAX) para buscar as consultas no intervalo de datas
        // Exemplo fictício:
        const consultas = [
            { paciente: 'Paciente Exemplo 1', dentista: 'Dr. Otávio', horario: 'Segunda-09:00' },
            { paciente: 'Paciente Exemplo 2', dentista: 'Dra. Samantha', horario: 'Terça-10:00' }
        ];

        // Limpa os horários
        document.querySelectorAll('#tabela-agenda input[type="radio"]').forEach(radio => {
            radio.disabled = false;
            radio.checked = false;
        });

        // Marca os horários já ocupados
        consultas.forEach(consulta => {
            const [dia, hora] = consulta.horario.split('-');
            document.querySelector(`input[value="${dia}-${hora}"]`).disabled = true;
        });
    }

    // Função para carregar consultas via API
async function carregarConsultas(inicioSemana, fimSemana) {
    const resposta = await fetch(`consultas.php?inicio=${inicioSemana.toISOString()}&fim=${fimSemana.toISOString()}`);
    const consultas = await resposta.json();

    // Limpa os horários
    document.querySelectorAll('#tabela-agenda input[type="radio"]').forEach(radio => {
        radio.disabled = false;
        radio.checked = false;
    });

    // Marca os horários já ocupados
    consultas.forEach(consulta => {
        const [dia, hora] = consulta.horario.split('-');
        const input = document.querySelector(`input[value="${dia}-${hora}"]`);
        if (input) input.disabled = true;
    });
}

    </script>

</body>
</html>
